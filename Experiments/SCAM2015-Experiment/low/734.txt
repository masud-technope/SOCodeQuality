void foo::bar()
{
    delete this;
    this->some_function();
}