actually it doesn't work as well in newer Androids (like 4.0+). They introduce dictionary suggestions above the keyboard. When you type a common word (let's say ""the"") followed by an illegal character for this filter (say, ""-""), the whole word is deleted and after you type another characters (even allowed ones, like ""blah"") filter returns """" and no character shows up in the field. This is because the method gets a SpannableStringBuilder in source parameter with ""the-blah"" in it and start/end parameters spanning the whole input string... See my answer for a better solution.
In that example, where it returns """", I think it should return the text that should be displayed. i.e. you should remove the illegal characters and return the string you WANT displayed. http://developer.android.com/reference/android/widget/TextView.html#onKeyUp(int, android.view.KeyEvent).
